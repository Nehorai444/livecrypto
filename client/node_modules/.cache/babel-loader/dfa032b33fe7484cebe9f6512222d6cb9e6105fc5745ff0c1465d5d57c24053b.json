{"ast":null,"code":"import _slicedToArray from\"/home/nehorai/Desktop/main/development/proejcts/livecrypto/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import'./App.css';import{Routes,Route}from'react-router-dom';import Menu from'./components/Menu';import HomePage from'./components/HomePage';import CoinsList from'./components/CoinsList';import{useTranslation}from'react-i18next';import Header from'./components/Header';import pako from'pako';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useTranslation=useTranslation(),t=_useTranslation.t;useEffect(function(){// Create a new WebSocket connection when the component mounts\nvar ws=new WebSocket(\"ws://\".concat(window.location.hostname));ws.binaryType='arraybuffer';// Set binary type for WebSocket\nws.onopen=function(){console.log('Connected to WebSocket server.');};ws.onmessage=function(event){var data=event.data;if(data!==undefined){try{var inflatedData=pako.inflate(data,{to:'string'});// decompression\nsetData(JSON.parse(inflatedData));// Set the data state to the data from the server\n}catch(error){console.error('Error parsing JSON:',error);}}};// Add event listener for beforeunload event to close WebSocket connection\nvar handleBeforeUnload=function handleBeforeUnload(){ws.close();};window.addEventListener('beforeunload',handleBeforeUnload);// Cleanup function to remove event listener and close WebSocket connection\nreturn function(){window.removeEventListener('beforeunload',handleBeforeUnload);ws.close();};},[]);useEffect(function(){document.title=\"LiveCrypto\";},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Menu,{}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/allCoins\",element:/*#__PURE__*/_jsx(CoinsList,{data:data})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{data:data})})]})]});}export default App;","map":{"version":3,"names":["useState","useEffect","Routes","Route","Menu","HomePage","CoinsList","useTranslation","Header","pako","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","data","setData","_useTranslation","t","ws","WebSocket","concat","window","location","hostname","binaryType","onopen","console","log","onmessage","event","undefined","inflatedData","inflate","to","JSON","parse","error","handleBeforeUnload","close","addEventListener","removeEventListener","document","title","className","children","path","element"],"sources":["/home/nehorai/Desktop/main/development/proejcts/livecrypto/client/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport './App.css';\nimport { Routes, Route } from 'react-router-dom';\nimport Menu from './components/Menu';\nimport HomePage from './components/HomePage';\nimport CoinsList from './components/CoinsList';\nimport { useTranslation } from 'react-i18next';\nimport Header from './components/Header';\nimport pako from 'pako';\n\nfunction App() {\n  const [data, setData] = useState([]);\n  const { t } = useTranslation();\n\n\n  useEffect(() => {\n    // Create a new WebSocket connection when the component mounts\n    const ws = new WebSocket(`ws://${window.location.hostname}`);\n    ws.binaryType = 'arraybuffer'; // Set binary type for WebSocket\n\n    ws.onopen = () => {\n      console.log('Connected to WebSocket server.');\n    };\n\n    ws.onmessage = (event) => {\n      const data = event.data;\n      if (data !== undefined) {\n        \n        try {\n          const inflatedData = pako.inflate(data, { to: 'string' }); // decompression\n          setData(JSON.parse(inflatedData)); // Set the data state to the data from the server\n          } catch (error) {\n            console.error('Error parsing JSON:', error);\n        }\n\n      }\n    };\n\n    // Add event listener for beforeunload event to close WebSocket connection\n    const handleBeforeUnload = () => {\n      ws.close();\n    };\n\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    // Cleanup function to remove event listener and close WebSocket connection\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n      ws.close();\n    };\n  }, []);\n\n  useEffect(() => {\n    document.title = \"LiveCrypto\"\n  }, [])\n  return (\n    <div className=\"App\">\n      <Menu />\n      <Header />\n      <Routes>\n        <Route path=\"/allCoins\" element={<CoinsList data={data} />} />\n        <Route path=\"/\" element={<HomePage data={data} />} />\n      </Routes>\n\n\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"uJAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,WAAW,CAClB,OAASC,MAAM,CAAEC,KAAK,KAAQ,kBAAkB,CAChD,MAAO,CAAAC,IAAI,KAAM,mBAAmB,CACpC,MAAO,CAAAC,QAAQ,KAAM,uBAAuB,CAC5C,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,OAASC,cAAc,KAAQ,eAAe,CAC9C,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,IAAI,KAAM,MAAM,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExB,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,IAAAC,SAAA,CAAwBf,QAAQ,CAAC,EAAE,CAAC,CAAAgB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,eAAA,CAAcb,cAAc,CAAC,CAAC,CAAtBc,CAAC,CAAAD,eAAA,CAADC,CAAC,CAGTpB,SAAS,CAAC,UAAM,CACd;AACA,GAAM,CAAAqB,EAAE,CAAG,GAAI,CAAAC,SAAS,SAAAC,MAAA,CAASC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAAE,CAAC,CAC5DL,EAAE,CAACM,UAAU,CAAG,aAAa,CAAE;AAE/BN,EAAE,CAACO,MAAM,CAAG,UAAM,CAChBC,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAC/C,CAAC,CAEDT,EAAE,CAACU,SAAS,CAAG,SAACC,KAAK,CAAK,CACxB,GAAM,CAAAf,IAAI,CAAGe,KAAK,CAACf,IAAI,CACvB,GAAIA,IAAI,GAAKgB,SAAS,CAAE,CAEtB,GAAI,CACF,GAAM,CAAAC,YAAY,CAAG1B,IAAI,CAAC2B,OAAO,CAAClB,IAAI,CAAE,CAAEmB,EAAE,CAAE,QAAS,CAAC,CAAC,CAAE;AAC3DlB,OAAO,CAACmB,IAAI,CAACC,KAAK,CAACJ,YAAY,CAAC,CAAC,CAAE;AACnC,CAAE,MAAOK,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC/C,CAEF,CACF,CAAC,CAED;AACA,GAAM,CAAAC,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAA,CAAS,CAC/BnB,EAAE,CAACoB,KAAK,CAAC,CAAC,CACZ,CAAC,CAEDjB,MAAM,CAACkB,gBAAgB,CAAC,cAAc,CAAEF,kBAAkB,CAAC,CAE3D;AACA,MAAO,WAAM,CACXhB,MAAM,CAACmB,mBAAmB,CAAC,cAAc,CAAEH,kBAAkB,CAAC,CAC9DnB,EAAE,CAACoB,KAAK,CAAC,CAAC,CACZ,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAENzC,SAAS,CAAC,UAAM,CACd4C,QAAQ,CAACC,KAAK,CAAG,YAAY,CAC/B,CAAC,CAAE,EAAE,CAAC,CACN,mBACEjC,KAAA,QAAKkC,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBrC,IAAA,CAACP,IAAI,GAAE,CAAC,cACRO,IAAA,CAACH,MAAM,GAAE,CAAC,cACVK,KAAA,CAACX,MAAM,EAAA8C,QAAA,eACLrC,IAAA,CAACR,KAAK,EAAC8C,IAAI,CAAC,WAAW,CAACC,OAAO,cAAEvC,IAAA,CAACL,SAAS,EAACY,IAAI,CAAEA,IAAK,CAAE,CAAE,CAAE,CAAC,cAC9DP,IAAA,CAACR,KAAK,EAAC8C,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEvC,IAAA,CAACN,QAAQ,EAACa,IAAI,CAAEA,IAAK,CAAE,CAAE,CAAE,CAAC,EAC/C,CAAC,EAGN,CAAC,CAEV,CAEA,cAAe,CAAAJ,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}